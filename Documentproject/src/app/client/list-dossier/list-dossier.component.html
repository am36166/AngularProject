<app-usernavbarre></app-usernavbarre>
<div class="container mt-4">
  <app-navbarre-dossier></app-navbarre-dossier>
  <div class="feedback-message alert alert-info mt-2" *ngIf="updated">{{ DocumentUpdated }}</div>

  <table class="table table-striped table-bordered mt-3">
    <thead class="thead-dark">
      <tr>
        <th scope="col">Nom du Dossier</th>
        <th scope="col">Emplacement</th>
        <th scope="col">Taille</th>
        <th scope="col">ID Propri√©taire</th>
        <th scope="col">Extension</th>
        <th scope="col">Actions</th>
      </tr>
    </thead>
    <tbody>
      <ng-container *ngFor="let dossier of dossiers">
        <tr>
          <td colspan="5" class="font-weight-bold bg-secondary text-white">{{ dossier.nom }}</td>
          <td>
            <button type="button" class="btn btn-danger btn-sm" (click)="deleteDossier(dossier)">
              <i class="bi bi-trash"></i> Supprimer
            </button>
          </td>
        </tr>
        <tr *ngFor="let document of dossier.documents">
          <td></td>
          <td>
            <div *ngIf="!document.editMode">
              {{ document._chemin.emplacement }}
            </div>
            <div *ngIf="document.editMode">
              <input type="text" [(ngModel)]="document._chemin.emplacement" class="form-control" />
            </div>
          </td>
          <td>
            <div *ngIf="!document.editMode">{{ document._taille | number:'1.0-2' }} Ko</div>
            <div *ngIf="document.editMode"><input type="text" [(ngModel)]="document._taille" class="form-control" /></div>
          </td>
          <td>
            <div *ngIf="!document.editMode">
              {{ document._Idproprietaire }}
            </div>
            <div *ngIf="document.editMode">
              <input type="text" [(ngModel)]="document._Idproprietaire" class="form-control" />
            </div>
          </td>
          <td>
            <div *ngIf="!document.editMode">
              {{ document._chemin.extension }}
            </div>
            <div *ngIf="document.editMode">
              <input type="text" [(ngModel)]="document._chemin.extension" class="form-control" />
            </div>
          </td>
          <td>
            <button type="button" class="btn btn-info btn-sm" (click)="editDocument(dossier.id, document.id)">
              <i class="bi bi-pencil"></i> Modifier
            </button>
            <button type="button" class="btn btn-danger btn-sm" (click)="deleteDocument(dossier.id, document.id)">
              <i class="bi bi-trash"></i> Supprimer
            </button>
            <ng-container *ngIf="document.editMode">
              <button type="button" class="btn btn-success btn-sm" (click)="saveDocument(dossier.id, document.id)">
                <i class="bi bi-save"></i> Enregistrer
              </button>
            </ng-container>
          </td>
        </tr>
      </ng-container>
    </tbody>
  </table>
</div>
